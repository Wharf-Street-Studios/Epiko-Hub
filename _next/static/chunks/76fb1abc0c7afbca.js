(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,97399,(e,t,r)=>{"use strict";var a=e.r(65480),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=a.useState,i=a.useEffect,l=a.useLayoutEffect,o=a.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),a=n({inst:{value:r,getSnapshot:t}}),s=a[0].inst,c=a[1];return l(function(){s.value=r,s.getSnapshot=t,d(s)&&c({inst:s})},[e,r,t]),i(function(){return d(s)&&c({inst:s}),e(function(){d(s)&&c({inst:s})})},[e]),o(r),r};r.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:c},31814,(e,t,r)=>{"use strict";t.exports=e.r(97399)},70472,e=>{"use strict";var t=e.i(28589),r=e.i(65480),a=e.i(51835),s=e.i(56260);e.i(29550);var n=e.i(97070),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let s=(0,n.createSlot)(`Primitive.${a}`),i=r.forwardRef((e,r)=>{let{asChild:n,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(n?s:a,{...i,ref:r})});return i.displayName=`Primitive.${a}`,{...e,[a]:i}},{}),l=e.i(31814);function o(){return()=>{}}var d="Avatar",[c,u]=function(e,a=[]){let s=[],n=()=>{let t=s.map(e=>r.createContext(e));return function(a){let s=a?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...a,[e]:s}}),[a,s])}};return n.scopeName=e,[function(a,n){let i=r.createContext(n);i.displayName=a+"Context";let l=s.length;s=[...s,n];let o=a=>{let{scope:s,children:n,...o}=a,d=s?.[e]?.[l]||i,c=r.useMemo(()=>o,Object.values(o));return(0,t.jsx)(d.Provider,{value:c,children:n})};return o.displayName=a+"Provider",[o,function(t,s){let o=s?.[e]?.[l]||i,d=r.useContext(o);if(d)return d;if(void 0!==n)return n;throw Error(`\`${t}\` must be used within \`${a}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=a.reduce((t,{useScope:r,scopeName:a})=>{let s=r(e)[`__scope${a}`];return{...t,...s}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return a.scopeName=t.scopeName,a}(n,...a)]}(d),[m,f]=c(d),x=r.forwardRef((e,a)=>{let{__scopeAvatar:s,...n}=e,[l,o]=r.useState("idle");return(0,t.jsx)(m,{scope:s,imageLoadingStatus:l,onImageLoadingStatusChange:o,children:(0,t.jsx)(i.span,{...n,ref:a})})});x.displayName=d;var p="AvatarImage",h=r.forwardRef((e,n)=>{let{__scopeAvatar:d,src:c,onLoadingStatusChange:u=()=>{},...m}=e,x=f(p,d),h=function(e,{referrerPolicy:t,crossOrigin:a}){let n=(0,l.useSyncExternalStore)(o,()=>!0,()=>!1),i=r.useRef(null),d=n?(i.current||(i.current=new window.Image),i.current):null,[c,u]=r.useState(()=>b(d,e));return(0,s.useLayoutEffect)(()=>{u(b(d,e))},[d,e]),(0,s.useLayoutEffect)(()=>{let e=e=>()=>{u(e)};if(!d)return;let r=e("loaded"),s=e("error");return d.addEventListener("load",r),d.addEventListener("error",s),t&&(d.referrerPolicy=t),"string"==typeof a&&(d.crossOrigin=a),()=>{d.removeEventListener("load",r),d.removeEventListener("error",s)}},[d,a,t]),c}(c,m),v=(0,a.useCallbackRef)(e=>{u(e),x.onImageLoadingStatusChange(e)});return(0,s.useLayoutEffect)(()=>{"idle"!==h&&v(h)},[h,v]),"loaded"===h?(0,t.jsx)(i.img,{...m,ref:n,src:c}):null});h.displayName=p;var v="AvatarFallback",g=r.forwardRef((e,a)=>{let{__scopeAvatar:s,delayMs:n,...l}=e,o=f(v,s),[d,c]=r.useState(void 0===n);return r.useEffect(()=>{if(void 0!==n){let e=window.setTimeout(()=>c(!0),n);return()=>window.clearTimeout(e)}},[n]),d&&"loaded"!==o.imageLoadingStatus?(0,t.jsx)(i.span,{...l,ref:a}):null});function b(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}g.displayName=v;var j=e.i(72199);function y({className:e,...r}){return(0,t.jsx)(x,{"data-slot":"avatar",className:(0,j.cn)("relative flex size-10 shrink-0 overflow-hidden rounded-full",e),...r})}function w({className:e,...r}){return(0,t.jsx)(h,{"data-slot":"avatar-image",className:(0,j.cn)("aspect-square size-full",e),...r})}function N({className:e,...r}){return(0,t.jsx)(g,{"data-slot":"avatar-fallback",className:(0,j.cn)("bg-muted flex size-full items-center justify-center rounded-full",e),...r})}e.s(["Avatar",()=>y,"AvatarFallback",()=>N,"AvatarImage",()=>w],70472)},16694,e=>{"use strict";var t=e.i(28589),r=e.i(72199);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...a})}function s({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function n({className:e,...a}){return(0,t.jsx)("h4",{"data-slot":"card-title",className:(0,r.cn)("leading-none",e),...a})}function i({className:e,...a}){return(0,t.jsx)("p",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6 [&:last-child]:pb-6",e),...a})}function o({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 pb-6 [.border-t]:pt-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>l,"CardDescription",()=>i,"CardFooter",()=>o,"CardHeader",()=>s,"CardTitle",()=>n])},94513,e=>{"use strict";var t=e.i(28589),r=e.i(72199);function a({className:e,type:a,...s}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}e.s(["Input",()=>a])},83805,e=>{"use strict";var t=e.i(65480),r=e.i(56260);function a(e){let[a,s]=t.useState(void 0);return(0,r.useLayoutEffect)(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let r,a;if(!Array.isArray(t)||!t.length)return;let n=t[0];if("borderBoxSize"in n){let e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;r=t.inlineSize,a=t.blockSize}else r=e.offsetWidth,a=e.offsetHeight;s({width:r,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}s(void 0)},[e]),a}e.s(["useSize",()=>a])},89941,e=>{"use strict";var t=e.i(28589),r=e.i(59497),a=e.i(50878);function s({icon:e,title:s,description:n,actionLabel:i,onAction:l}){return(0,t.jsxs)(r.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center justify-center py-24 text-center px-4",children:[(0,t.jsxs)("div",{className:"w-24 h-24 bg-white/5 rounded-full flex items-center justify-center border border-white/5 mb-6 relative group",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-[#866bff] rounded-full blur-xl opacity-20 group-hover:opacity-30 transition-opacity"}),(0,t.jsx)(e,{className:"w-10 h-10 text-gray-400 group-hover:text-[#99ee2d] transition-colors"})]}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:s}),(0,t.jsx)("p",{className:"text-gray-400 max-w-sm mx-auto mb-8 leading-relaxed",children:n}),i&&l&&(0,t.jsx)(a.Button,{onClick:l,className:"bg-[#99ee2d] text-black hover:bg-[#88d428] font-bold px-8 h-12 rounded-xl shadow-[0_0_20px_rgba(153,238,45,0.2)] hover:shadow-[0_0_30px_rgba(153,238,45,0.4)] transition-all transform hover:-translate-y-1",children:i})]})}e.s(["EmptyState",()=>s])},58750,e=>{"use strict";var t=e.i(28589),r=e.i(65480),a=e.i(42168),s=e.i(50878),n=e.i(16694);e.i(29550);var i=e.i(97070),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let s=(0,i.createSlot)(`Primitive.${a}`),n=r.forwardRef((e,r)=>{let{asChild:n,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(n?s:a,{...i,ref:r})});return n.displayName=`Primitive.${a}`,{...e,[a]:n}},{}),o="Progress",[d,c]=function(e,a=[]){let s=[],n=()=>{let t=s.map(e=>r.createContext(e));return function(a){let s=a?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...a,[e]:s}}),[a,s])}};return n.scopeName=e,[function(a,n){let i=r.createContext(n);i.displayName=a+"Context";let l=s.length;s=[...s,n];let o=a=>{let{scope:s,children:n,...o}=a,d=s?.[e]?.[l]||i,c=r.useMemo(()=>o,Object.values(o));return(0,t.jsx)(d.Provider,{value:c,children:n})};return o.displayName=a+"Provider",[o,function(t,s){let o=s?.[e]?.[l]||i,d=r.useContext(o);if(d)return d;if(void 0!==n)return n;throw Error(`\`${t}\` must be used within \`${a}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=a.reduce((t,{useScope:r,scopeName:a})=>{let s=r(e)[`__scope${a}`];return{...t,...s}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return a.scopeName=t.scopeName,a}(n,...a)]}(o),[u,m]=d(o),f=r.forwardRef((e,r)=>{var a,s;let{__scopeProgress:n,value:i=null,max:o,getValueLabel:d=h,...c}=e;(o||0===o)&&!b(o)&&console.error((a=`${o}`,`Invalid prop \`max\` of value \`${a}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let m=b(o)?o:100;null===i||j(i,m)||console.error((s=`${i}`,`Invalid prop \`value\` of value \`${s}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let f=j(i,m)?i:null,x=g(f)?d(f,m):void 0;return(0,t.jsx)(u,{scope:n,value:f,max:m,children:(0,t.jsx)(l.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":g(f)?f:void 0,"aria-valuetext":x,role:"progressbar","data-state":v(f,m),"data-value":f??void 0,"data-max":m,...c,ref:r})})});f.displayName=o;var x="ProgressIndicator",p=r.forwardRef((e,r)=>{let{__scopeProgress:a,...s}=e,n=m(x,a);return(0,t.jsx)(l.div,{"data-state":v(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...s,ref:r})});function h(e,t){return`${Math.round(e/t*100)}%`}function v(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function g(e){return"number"==typeof e}function b(e){return g(e)&&!isNaN(e)&&e>0}function j(e,t){return g(e)&&!isNaN(e)&&e<=t&&e>=0}p.displayName=x;var y=e.i(72199);let w=r.forwardRef(({className:e,value:r,indicatorClassName:a,...s},n)=>(0,t.jsx)(f,{ref:n,"data-slot":"progress",className:(0,y.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...s,children:(0,t.jsx)(p,{"data-slot":"progress-indicator",className:(0,y.cn)("bg-primary h-full w-full flex-1 transition-all",a),style:{transform:`translateX(-${100-(r||0)}%)`}})}));w.displayName=f.displayName;var N=e.i(55102),S=e.i(59497),C=e.i(20804),E=e.i(98259);async function _(e){let t=(0,E.createClient)(),{data:r,error:a}=await t.from("users").select("karma_points").eq("id",e).single();return a?(console.error("Error fetching karma balance:",a),0):r?.karma_points||0}async function k(e,t=50){let r=(0,E.createClient)(),{data:a,error:s}=await r.from("karma_transactions").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);return s?(console.error("Error fetching karma transactions:",s),[]):a||[]}async function L(e){let t=(0,E.createClient)(),r=new Date;r.setDate(1),r.setHours(0,0,0,0);let{data:a,error:s}=await t.from("karma_transactions").select("amount").eq("user_id",e).gte("created_at",r.toISOString());return s?(console.error("Error fetching monthly karma:",s),0):a?.reduce((e,t)=>e+t.amount,0)||0}var R=e.i(41049),$=e.i(89941);function P(){let{user:e}=(0,C.useAuth)(),[i,l]=(0,r.useState)(0),[o,d]=(0,r.useState)(0),[c,u]=(0,r.useState)([]),[m,f]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{!async function(){if(e)try{let[t,r,a]=await Promise.all([_(e.id),k(e.id),L(e.id)]);l(t),u(r),d(a)}catch(e){console.error("Error loading karma data:",e),R.toast.error("Failed to load karma data")}finally{f(!1)}}()},[e]),(0,t.jsxs)(S.motion.div,{className:"p-4 md:p-8 space-y-8 max-w-[1600px] mx-auto",initial:{opacity:0},animate:{opacity:1},children:[(0,t.jsx)(a.DashboardHeader,{}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Karma Points"}),(0,t.jsx)("p",{className:"text-gray-400",children:"Earn rewards for your activity in the Epiko ecosystem."})]}),(0,t.jsxs)(s.Button,{className:"bg-[#99ee2d] text-black hover:bg-[#88d428] font-bold shadow-lg shadow-[#99ee2d]/20",children:[(0,t.jsx)(N.RiShoppingBag3Line,{className:"w-5 h-5 mr-2"})," Redeem Store"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsx)(n.Card,{className:"bg-gradient-to-br from-[#866bff] to-[#5A29C3] border-none text-white md:col-span-2 rounded-3xl shadow-xl",children:(0,t.jsxs)(n.CardContent,{className:"p-8 flex flex-col md:flex-row justify-between items-center gap-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-purple-200 mb-1",children:"Total Karma Balance"}),(0,t.jsx)("h2",{className:"text-6xl font-bold font-mono mb-4",children:m?"...":i.toLocaleString()}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-purple-100 bg-black/20 px-3 py-1 rounded-full w-fit",children:[(0,t.jsx)(N.RiStarFill,{className:"w-4 h-4 text-[#99ee2d]"}),(0,t.jsx)("span",{children:"Top 5% of players this month"})]})]}),(0,t.jsxs)("div",{className:"w-full md:w-1/3 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"Next Level"}),(0,t.jsx)("span",{children:"3,157 to go"})]}),(0,t.jsx)(w,{value:75,className:"h-2 bg-black/20",indicatorClassName:"bg-[#99ee2d]"}),(0,t.jsx)("p",{className:"text-xs text-purple-200 text-right",children:"Level 15 â†’ 16"})]})]})}),(0,t.jsxs)(n.Card,{className:"bg-[#1c1f2a]/40 backdrop-blur-xl border-white/5 text-white rounded-3xl",children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"bg-[#99ee2d]/20 p-2 rounded-lg",children:(0,t.jsx)(N.RiGiftLine,{className:"w-5 h-5 text-[#99ee2d]"})}),"Monthly Earnings"]})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Epiko Regal"}),(0,t.jsxs)("span",{className:"font-bold",children:["+",Math.floor(.6*o)]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Tournaments"}),(0,t.jsxs)("span",{className:"font-bold",children:["+",Math.floor(.3*o)]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Daily Login"}),(0,t.jsxs)("span",{className:"font-bold",children:["+",Math.floor(.1*o)]})]}),(0,t.jsx)("div",{className:"h-px bg-white/5 my-2"}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-lg",children:[(0,t.jsx)("span",{children:"Total"}),(0,t.jsx)("span",{className:"font-bold text-[#99ee2d]",children:m?"...":o.toLocaleString()})]})]})})]})]}),(0,t.jsxs)(n.Card,{className:"bg-[#1c1f2a]/40 backdrop-blur-xl border-white/5 text-white rounded-3xl",children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"bg-white/10 p-2 rounded-lg",children:(0,t.jsx)(N.RiHistoryLine,{className:"w-5 h-5 text-gray-400"})}),"History"]})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)("div",{className:"space-y-0",children:m?(0,t.jsx)("div",{className:"text-center text-gray-500 py-8",children:"Loading history..."}):0===c.length?(0,t.jsx)($.EmptyState,{icon:N.RiHistoryLine,title:"No history found",description:"Your karma history will appear here once you start earning rewards."}):c.map(e=>(0,t.jsxs)("div",{className:"flex justify-between items-center py-4 border-b border-white/5 last:border-0 hover:bg-white/5 px-4 -mx-4 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-white/5 rounded-full flex items-center justify-center border border-white/5",children:e.amount>0?(0,t.jsx)(N.RiStarFill,{className:"w-5 h-5 text-[#99ee2d]"}):(0,t.jsx)(N.RiGiftLine,{className:"w-5 h-5 text-[#866bff]"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-white capitalize",children:e.description}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]})]}),(0,t.jsxs)("span",{className:`font-bold text-lg ${e.amount>0?"text-[#99ee2d]":"text-red-400"}`,children:[e.amount>0?"+":"",e.amount]})]},e.id))})})]})]})}e.s(["default",()=>P],58750)}]);